<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>

    <!-- Ask for confirmation before canceling inventories -->
    <record model="ir.ui.view" id="stock_inventory_valuation_form_view">
        <field name="name">stock.inventory.valuation.form</field>
        <field name="model">stock.inventory</field>
        <field name="inherit_id" ref="stock.view_inventory_form" />
        <field name="arch" type="xml">
            <xpath
                expr="/form[@string='Physical Inventory']//button[@name='action_cancel_inventory']"
                position="attributes">
                    <attribute name="confirm">The inventory valuation will be deleted.
Are you sure ?</attribute>
            </xpath>
        </field>
    </record>

    <!-- Inventory Valuation views -->
    <record model="ir.ui.view" id="view_inventory_valuation_filter">
        <field name="name">inventory.valuation.filter</field>
        <field name="model">stock.inventory.valuation</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <search string="Inventory Valuation">
                <group col="6" colspan="4">
                    <field name="product_id"/>
                    <field name="category_id"/>
                    <field name="label_ids"/>
                </group>
                <newline/>
                <group expand="0" string="Group By...">
                    <filter name="inventory" string="Inventory" icon="terp-accessories-archiver" domain="[]" context="{'group_by' : 'inventory_id'}"/>
                    <filter name="category" string="Product Category" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'category_id'}"/>
                    <filter name="uom" string="Unit of Measure" icon="terp-mrp" domain="[]" context="{'group_by':'product_uom'}"/>
                </group>
            </search>
        </field>
    </record>
    <record model="ir.ui.view" id="stock_inventory_valuation_tree_view">
        <field name="name">stock.inventory.valuation.tree</field>
        <field name="model">stock.inventory.valuation</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Details" editable="bottom">
                <field name="inventory_id"/>
                <field name="category_id"/>
                <field name="product_id"/>
                <field name="product_qty"/>
                <field name="product_uom"/>
                <field name="standard_price"/>
                <field name="total_valuation"/>
            </tree>
        </field>
    </record>
    <record model="ir.ui.view" id="stock_inventory_valuation_line_form_view">
        <field name="name">stock.inventory.valuation.detail.form</field>
        <field name="model">stock.inventory.valuation</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Details" version="7.0">
                <group col="6" colspan="4">
                    <field name="product_id"/>
                    <field name="inventory_id"/>
                    <field name="date"/>
                </group>
                <group col="8" colspan="4">
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="standard_price"/>
                    <field name="total_valuation"/>
                </group>
                <group col="2" colspan="4">
                    <separator colspan="2"/>
                    <field name="category_id"/>
                    <label string="Labels" colspan="2"/>
                    <field name="label_ids" nolabel="1" colspan="2"/>
                </group>
            </form>
        </field>
    </record>
    <act_window id="action_inventory_valuation"
        name="Valuation"
        res_model="stock.inventory.valuation"
        src_model="stock.inventory"
        view_mode="tree,form"
        view_type="form"
        context="{'search_default_inventory':1, 'search_default_category':1, 'search_default_uom':1}"
        domain="[('inventory_id', '=', active_id)]"/>
	</data>
</openerp>
