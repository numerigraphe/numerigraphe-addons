<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    <!-- Inventory Valuation views -->
    <record model="ir.ui.view" id="view_inventory_valuation_filter">
        <field name="name">inventory.valuation.filter</field>
        <field name="model">stock.inventory.valuation</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <search string="Inventory Valuation">
                <group col="6" colspan="4">
                    <field name="date"/>
                    <separator/>
                    <field name="product_id"/>
                    <field name="category_id"/>
                    <field name="label_ids"/>
                </group>
                <newline/>
                <group expand="0" string="Group By...">
                    <filter name="name" string="Title" icon="terp-go-month" domain="[]" context="{'group_by' : 'name'}"/>
                    <filter name="category" string="Product Category" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'category_id'}"/>
                    <filter name="uom" string="Unit of Measure" icon="terp-mrp" domain="[]" context="{'group_by':'product_uom'}"/>
                </group>
            </search>
        </field>
    </record>
    <record model="ir.ui.view" id="stock_inventory_valuation_tree_view">
        <field name="name">stock.inventory.valuation.tree</field>
        <field name="model">stock.inventory.valuation</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Details" editable="bottom">
                <field name="name"/>
                <field name="date"/>
                <field name="category_id"/>
                <field name="product_id"/>
                <field name="product_qty"/>
                <field name="product_uom"/>
                <field name="standard_price"/>
                <field name="total_valuation"/>
            </tree>
        </field>
    </record>
    <record model="ir.ui.view" id="stock_inventory_valuation_line_form_view">
        <field name="name">stock.inventory.valuation.detail.form</field>
        <field name="model">stock.inventory.valuation</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form>
                <group col="6" colspan="4">
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="date"/>
                </group>
                <group col="8" colspan="4">
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="standard_price"/>
                    <field name="total_valuation"/>
                </group>
                <group col="2" colspan="4">
                    <separator colspan="2"/>
                    <field name="category_id"/>
                    <label string="Labels" colspan="2"/>
                    <field name="label_ids" nolabel="1" colspan="2"/>
                </group>
            </form>
        </field>
    </record>
    
    <!-- Action to open the valuation from the menu -->
    <act_window id="action_inventory_valuation_all"
        name="Product Valuations"
        res_model="stock.inventory.valuation"
        view_mode="tree,form"
        view_type="form"
        context="{'search_default_name':1, 'search_default_category':1, 'search_default_uom':1}" />
    
    <menuitem name="Product Valuations" id="menu_inventory_valuation_all"
        parent="stock.menu_stock_product" action="action_inventory_valuation_all" />
    </data>
</openerp>
